<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>Class: stompit.Client - Stompit Manual</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Stompit Manual</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">stompit module api <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../">Index</a>
                        </li>
                    
                        <li >
                            <a href="../connect/">Function: stompit.connect</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Class: stompit.Client</a>
                        </li>
                    
                        <li >
                            <a href="../connect-failover/">Class: stompit.ConnectFailover</a>
                        </li>
                    
                        <li >
                            <a href="../channel-pool/">Class: stompit.ChannelPool</a>
                        </li>
                    
                        <li >
                            <a href="../channel/">Class: stompit.Channel</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../connect/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../connect-failover/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/gdaws/node-stomp">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#class-stompitclient">Class: stompit.Client</a></li>
        
            <li><a href="#new-stompitclienttransport-options">new stompit.Client(transport, [options])</a></li>
        
            <li><a href="#clientconnectheaders-callback">client.connect(headers, [callback])</a></li>
        
            <li><a href="#clientdisconnectcallback">client.disconnect([callback])</a></li>
        
            <li><a href="#clientdestroyerror">client.destroy([error])</a></li>
        
            <li><a href="#clientsendheaders-options">client.send(headers, [options])</a></li>
        
            <li><a href="#clientsendframecommand-headers-options">client.sendFrame(command, headers, [options])</a></li>
        
            <li><a href="#clientsubscribeheaders-onmessagecallback">client.subscribe(headers, onMessageCallback)</a></li>
        
            <li><a href="#clientbeginheaders">client.begin([headers])</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="class-stompitclient">Class: stompit.Client</h1>
<hr />
<h2 id="new-stompitclienttransport-options">new stompit.Client(transport, [options])</h2>
<p>The transport parameter expects a <code>stream.Duplex</code> object argument. The transport 
must be in a connecting or connected state.</p>
<p>The constructor is useful if you're using a custom transport such a transform
stream. However, if you are using any of the standard transports then you should
avoid using the constructor and instead use the much more convenient 
<a href="../connect/">stompit.connect</a> function to instantiate a stompit.Client object and establish
a connection.</p>
<p>Options:</p>
<ul>
<li>
<p><code>heartbeat</code> <code>Array</code> <code>Default:[0,0]</code>: Set the preferred heart beat timings, in 
milliseconds. The first element is the send frequency. The Client class will try 
to ensure the send frequency is reached by sending frame trailer bytes if the 
application is not creating busy enough traffic. The second element is the 
expected receive frequency; i.e. the client expects to see an increase in the 
number of bytes received on the socket every n milliseconds).</p>
</li>
<li>
<p><code>heartbeatDelayMargin</code> <code>Number</code> <code>Default:100</code>: Milliseconds added to the
heart-beat receive frequency to allow for delay variations.</p>
</li>
</ul>
<h2 id="clientconnectheaders-callback">client.connect(headers, [callback])</h2>
<p>Send a CONNECT frame to the server.</p>
<p>If a callback function argument is given then it will be called on connect
event.</p>
<p>Note: you must not call this method if you used stompit.connect function.</p>
<h2 id="clientdisconnectcallback">client.disconnect([callback])</h2>
<p>Disconnect from server. A DISCONNECT frame is sent with a receipt request. No
further transmissions are permitted while the disconnect is pending. The server
should reply with a disconnect receipt and end the connection once all messages 
sent from the client are acknowledged.</p>
<p>The <code>callback</code> function is called when the connection is closed or when an
error occurs.</p>
<h2 id="clientdestroyerror">client.destroy([error])</h2>
<p>Close the connection immediately without warning the server. A DISCONNECT frame
is not sent.</p>
<p>If an error argument is given then an error event is emitted from the client.</p>
<h2 id="clientsendheaders-options">client.send(headers, [options])</h2>
<p>Send or publish a message. This method returns a <code>stream.Writable</code> object for 
you to write the message content. The frame headers are transmitted once
the message content writing begins i.e. on the first call to the write method.</p>
<p>Important headers:</p>
<ul>
<li><code>destination</code> is a required property of the headers parameter.</li>
<li><code>content-length</code> is an optional property of the header parameter if sending 
text data and is a required property if sending binary data.</li>
</ul>
<p>Options:</p>
<ul>
<li><code>onReceipt</code> is a callback function that will be called when the receipt frame
for this message is received from the server. You don't have to include a 
receipt header to enable this functionality - the send method appends a receipt 
header if the onReceipt property is defined.</li>
</ul>
<h2 id="clientsendframecommand-headers-options">client.sendFrame(command, headers, [options])</h2>
<p>Send a frame to the server. A <code>stream.Writable</code> object is returned for you
to write the frame body.</p>
<p>For available options see client.send method.</p>
<h2 id="clientsubscribeheaders-onmessagecallback">client.subscribe(headers, onMessageCallback)</h2>
<p>Create a new subscription. A SUBSCRIBE frame is sent with the headers set in the
<code>headers</code> argument. The <code>onMessageCallback</code> function is called each time a new
message is received. Every message must be read and acknowledged, even if you 
don't consume the message in your application (in this case you would send a 
negative acknowledgment). You must not ignore a message, doing so would block
other communications with the client. If you are unable to read a message then 
you must terminate the connection using the <a href="#clientdestroyerror">client.destroy</a> 
method.</p>
<p>Important headers:</p>
<ul>
<li><code>destination</code>: required by the server</li>
<li><code>ack</code>: set the message acknowledgment mode, having value <code>'auto'</code>, <code>'client'</code> or <code>'client-individual'</code></li>
</ul>
<p>The <code>onMessageCallback</code> function has the parameters <code>error, message</code>. The 
message object extends <code>stream.Readable</code></p>
<h3 id="messageack">message.ack()</h3>
<p>Send acknowledgement to server. This method should be called after the end 
event is emitted from the message object. Even if the subscription is in auto 
mode, you must still call one of the acknowledgment methods.</p>
<h3 id="messagenack">message.nack()</h3>
<p>Send negative acknowledgement to server. This method should be called after the 
end event is emitted.</p>
<p>Do not use the <code>message.nack</code> method before reading all the message content. If
you cannot read the message content then the connection must be terminated 
using the <a href="#clientdestroyerror">client.destroy</a> method.</p>
<h2 id="clientbeginheaders">client.begin([headers])</h2>
<p>Creates a transaction. A BEGIN frame is sent to the server. A transaction object
is returned from the method. The transaction object will append a transaction 
identification header to any related outgoing frames.</p>
<h3 id="transactionsendheaders-options">transaction.send(headers, [options])</h3>
<p>Same behaviour as <a href="#clientsendheaders-options">client.send</a> method.</p>
<h3 id="transactioncommitoptions">transaction.commit([options])</h3>
<p>Commit the transaction. A COMMIT frame is sent to the server. Use the <code>onReceipt</code>
option to get confirmation from the server that this transaction was successfully
committed.</p>
<p>The server may terminate the connection with an error frame if it cannot commit
the transaction. In this case, an <code>error</code> event would be emitted from the client
object.</p>
<h3 id="transactionabortoptions">transaction.abort([options])</h3>
<p>Abort the transaction. An ABORT frame is sent to the server.</p>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>